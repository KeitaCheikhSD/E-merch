{% extends 'base.html.twig' %}

{% block title %}Inscription{% endblock %}

{% block body %}
  <div class="min-h-screen relative flex items-center justify-center overflow-hidden">
    <div class="absolute inset-0 bg-[#0A0F1C]">
      <div class="absolute inset-0 bg-gradient-to-br from-blue-500/10 via-transparent to-purple-500/10"></div>
      <div class="absolute inset-0" style="background: radial-gradient(circle at 50% 50%, rgba(30, 64, 175, 0.1) 0%, transparent 50%);"></div>
      <div class="absolute w-full h-full">
        <div class="absolute transform -translate-x-1/2 -translate-y-1/2" style="background: linear-gradient(217deg, rgba(30,64,175,0.1), rgba(30,64,175,0) 70%);filter: blur(100px);width: 800px;height: 800px;left: 30%;top: 30%;"></div>
        <div class="absolute transform -translate-x-1/2 -translate-y-1/2" style="background: linear-gradient(127deg, rgba(99,102,241,0.1), rgba(99,102,241,0) 70%);filter: blur(100px);width: 800px;height: 800px;left: 70%;top: 70%;"></div>
      </div>
      <div class="absolute inset-0 backdrop-blur-[100px]"></div>
    </div>




<!-- Avis Form -->
<div class="bg-white/[0.02] backdrop-blur-sm rounded-2xl border border-white/[0.05] shadow-[0_0_1000px_0_rgba(30,64,175,0.1)] p-8">
    {% if app.user %}
        {{ form_start(avisform, {'attr': {'class': 'space-y-6'}}) }}
            {{ form_row(avisform._token) }}

            <div>
                {{ form_label(avisform.Description, 'Description', {'label_attr': {'class': 'block text-sm font-medium text-gray-300'}}) }}
                <div class="mt-1 relative">
                    {{ form_widget(avisform.Description, {
                        'attr': {
                            'class': 'block w-full px-4 py-3 bg-white/[0.03] border border-white/[0.1] rounded-xl text-white placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200 ease-in-out',
                            'placeholder': 'Dites ce que vous en pensez .......'
                        }
                    }) }}
                </div>
                {{ form_errors(avisform.Description) }}
            </div>

            <div>
                {{ form_label(avisform.Note, 'Note', {'label_attr': {'class': 'block text-sm font-medium text-gray-300'}}) }}
                <div class="mt-1 relative">
                    {{ form_widget(avisform.Note, {
                        'attr': {
                            'class': 'block w-full px-4 py-3 bg-white/[0.03] border border-white/[0.1] rounded-xl text-white placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200 ease-in-out',
                            'placeholder': '5'
                        }
                    }) }}
                </div>
                {{ form_errors(avisform.Note) }}
                <!-- Affichage des étoiles -->
                <div class="flex items-center mt-4">
                    {% set stars = avisform.Note.vars.value %}
                    {% if stars is not defined or stars is empty %}
                        {% set stars = 0 %}
                    {% endif %}
                    {% for i in 1..5 %}
                        {% if i <= stars %}
                            <svg class="w-6 h-6 text-yellow-500 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                                <path d="M9.049.67l2.22 6.853 7.207.042c.83.005 1.172 1.09.504 1.617l-5.787 4.248 2.22 6.853c.244.753-.638 1.376-1.29.905l-5.793-4.248-5.793 4.248c-.653.471-1.535-.152-1.29-.905l2.22-6.853-5.787-4.248c-.668-.527-.326-1.612.504-1.617l7.207-.042L9.05.67c.253-.78 1.322-.78 1.576 0z"/>
                            </svg>
                        {% else %}
                            <svg class="w-6 h-6 text-gray-400 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                                <path d="M9.049.67l2.22 6.853 7.207.042c.83.005 1.172 1.09.504 1.617l-5.787 4.248 2.22 6.853c.244.753-.638 1.376-1.29.905l-5.793-4.248-5.793 4.248c-.653.471-1.535-.152-1.29-.905l2.22-6.853-5.787-4.248c-.668-.527-.326-1.612.504-1.617l7.207-.042L9.05.67c.253-.78 1.322-.78 1.576 0z"/>
                            </svg>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>

        {{ form_end(avisform) }}
    {% else %}
        <!-- Message pour les utilisateurs non connectés -->
        <p class="text-center text-gray-300">
            Vous devez être connecté pour laisser un avis.
            <a href="{{ path('app_login') }}" class="text-blue-500 underline">Connectez-vous ici</a>.
        </p>
    {% endif %}
</div>



            <button
                type="submit"
                class="w-full flex justify-center py-3 px-4 border border-transparent rounded-xl text-sm font-semibold text-white bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 ease-in-out transform hover:-translate-y-0.5"
            >
                Valider
            </button>
          {{ form_end(avisform) }}

          <div class="mt-6">
            <div class="relative">
              <div class="absolute inset-0 flex items-center">
                <div class="w-full border-t border-white/[0.1]"></div>
              </div>

            </div>


          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
